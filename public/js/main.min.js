$(document).ready(function(){$(".sorting__select").select2({minimumResultsForSearch:1/0,theme:"basic",width:"170px",dropdownParent:$(".sorting__select").parent()}),$("#lang").select2({minimumResultsForSearch:1/0,theme:"basic",width:"50px",dropdownParent:$("#lang").parent(),templateSelection:function(e){if(!e.id)return e.text;var r=e.text.substring(0,3),a=$("<span></span>");return a.text(r),a}}),$(".product-slider").slick({arrows:!1,autoplay:!0,dots:!0,infinite:!0,mobileFirst:!0,slidesToScroll:1,slidesToShow:1}),$(".password-toggle").click(function(e){e.preventDefault();var r=$(this).parent().find("input");"password"===r.attr("type")?r.attr("type","text"):r.attr("type","password")}),$("#reg-link").click(function(e){e.preventDefault(),$(".modal").modal("hide"),setTimeout(function(){$("#registerModal").modal("show")},350)}),$("#place").select2({placeholder:"Место получения",minimumResultsForSearch:1/0,theme:"basic",width:"250px",dropdownParent:$("#place").parent()}),$("#type").select2({placeholder:"Класс авто",minimumResultsForSearch:1/0,theme:"basic",width:"100%",dropdownParent:$("#type").parent()}),$("#transmission").select2({placeholder:"Коробка передач",minimumResultsForSearch:1/0,theme:"basic",width:"100%",dropdownParent:$("#transmission").parent()}),$("#mesta").select2({minimumResultsForSearch:1/0,theme:"basic",dropdownParent:$("#mesta").parent()}),$("#engine").select2({minimumResultsForSearch:1/0,theme:"basic",dropdownParent:$("#engine").parent()}),$(".header__nav-toggle").click(function(e){e.preventDefault(),$(".header__nav").is(":visible")?($(".header__nav").hide(),$("body").removeClass("menu-open")):($(".header__nav").show(),$("body").addClass("menu-open"))}),$(".header__nav__close").click(function(e){e.preventDefault(),$(".header__nav").is(":visible")?($(".header__nav").hide(),$("body").removeClass("menu-open")):($(".header__nav").show(),$("body").addClass("menu-open"))}),$(".img-to-bg").each(function(){$(this).find(".img-to-bg__image").length&&$(this).css("background-image","url("+$(this).find("> img").attr("src")+")")}),$(".car-slider__slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:".car-slider__nav",mobileFirst:!0,infinite:!1}),$(".car-slider__nav").slick({slidesToShow:5,slidesToScroll:1,asNavFor:".car-slider__slider",dots:!1,focusOnSelect:!0,mobileFirst:!0,infinite:!1}),$(".accordeon dd").hide().prev().click(function(){$(".accordeon dl.current").removeClass("current"),$(this).parents(".accordeon").find("dd").not(this).slideUp().prev().removeClass("active").parents("dl").removeClass("active"),$(this).next().not(":visible").slideDown().prev().addClass("active").parents("dl").addClass("active")}),$(".accordeon dl.current dd").show(),$('[data-toggle="tooltip"]').tooltip(),$(".ask-a-question form").validate({errorClass:"error",validClass:"valid",highlight:function(e){$(e).parent().addClass("error").removeClass("valid")},unhighlight:function(e){$(e).parent().removeClass("error").addClass("valid")},rules:{full_name:{required:!0},phone:{required:!0,number:!0},message:{required:!0},ask_checkbox:{required:!0},radio_1:{required:!0}}}),$(".rent-sidebar__block form").validate({errorClass:"error",validClass:"valid",highlight:function(e){$(e).parent().addClass("error").removeClass("valid")},unhighlight:function(e){$(e).parent().removeClass("error").addClass("valid")},rules:{radio_1:{required:!0},from_datepicker:{required:!0},to_datepicker:{required:!0}},messages:{from_datepicker:{required:!1},to_datepicker:{required:!1}}}),$(".form").validate({errorClass:"error",validClass:"valid",highlight:function(e){$(e).parent().addClass("error").removeClass("valid")},unhighlight:function(e){$(e).parent().removeClass("error").addClass("valid")},rules:{full_name:{required:!0},name_company:{required:!0},identification_code:{required:!0,number:!0},surname:{required:!0},email:{required:!0,myEmail:!0},email2:{required:!0,myEmail:!0},phone:{required:!0,myPhone:!0},message:{required:!0},ask_checkbox:{required:!0}}}),$.validator.addMethod("myPhone",function(e,r){return e.match(/[0-9\-\(\)\s]+/)}),$.validator.addMethod("myEmail",function(e,r){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})});var $document=$(window),$element=$(".header"),className="header_has-scrolled";$document.on("scroll load",function(){0<$document.scrollTop()?!1===$element.hasClass(className)&&(console.log($document.scrollTop()),$element.addClass(className)):$document.scrollTop()<=1&&$element.removeClass(className)}),$("#from-date").datepicker({language:"ru",format:"С d MM"}),$("#to-date").datepicker({language:"ru",format:"По d MM"}),$(".search__dropdown-toggle").click(function(e){e.preventDefault(),$(".search__dropdown-menu").is(":visible")?$(".search__dropdown-menu").hide():$(".search__dropdown-menu").show()}),$(".search__dropdown-close").click(function(e){e.preventDefault(),$(this).parent().hide()}),0<$("#subscribe").length&&$("#subscribe").validate({errorPlacement:function(e,r){e.appendTo(r.parent().parent())},highlight:function(e,r){$(e).addClass(r),$(e).parent().parent().addClass("has-error")},unhighlight:function(e,r){$(e).removeClass(r),$(e).parent().parent().removeClass("has-error")},rules:{newsletterEmail:{required:!0,email:!0},newsletterTerms:"required"},submitHandler:function(e){e.submit()}}),0<$("#registration").length&&$("#registration").validate({errorPlacement:function(e,r){e.appendTo(r.parent().parent())},highlight:function(e,r){$(e).addClass(r),$(e).parent().parent().addClass("has-error")},unhighlight:function(e,r){$(e).removeClass(r),$(e).parent().parent().removeClass("has-error")},rules:{regName:"required",regMail:{required:!0,email:!0},regPassword:"required",regTerms:"required"},submitHandler:function(e){e.submit()}}),0<$("#login").length&&$("#login").validate({errorPlacement:function(e,r){e.appendTo(r.parent().parent())},highlight:function(e,r){$(e).addClass(r),$(e).parent().parent().addClass("has-error")},unhighlight:function(e,r){$(e).removeClass(r),$(e).parent().parent().removeClass("has-error")},rules:{logMail:{required:!0,email:!0},logPassword:"required"},submitHandler:function(e){e.submit()}}),$(window).on("load resize",function(){var e=$(".similar-cars__slider");$(window).width()<767&&!e.is(".slick-initialized")?e.slick({arrows:!0,dots:!1,slidesToShow:1,slidesToScroll:1,infinite:!1}):768<$(window).width()&&e.is(".slick-initialized")&&e.slick("unslick")}),feather.replace();var form=$("#example-advanced-form").show();function uploadImage(){var e=$(".images .pic"),a=$('<input type="file" accept="image/*" />'),i=$(".images");$(".delete-img");e.on("click",function(){a.click()}),a.on("change",function(){var e=new FileReader,r=a.val().replace(/\\/g,"/").replace(/.*\//,"");e.onload=function(e){i.prepend('<li><div class="img" style="background-image: url(\''+e.target.result+'\');" rel="'+e.target.result+'"></div><p>'+r+'</p><a href="#" class="delete-img">Удалить</a></li>')},e.readAsDataURL(a[0].files[0])}),i.on("click",".delete-img",function(e){e.preventDefault(),$(this).parents("li").remove()})}function mapInitialize(e){var r={center:new google.maps.LatLng(51.5287718,-.2416804),zoom:12,zoomControl:!0,scaleControl:!0},a=new google.maps.Map(document.getElementById(e),r);a.setOptions({styles:[{featureType:"all",stylers:[{saturation:0}]}]});for(var i,n,t=[{position:new google.maps.LatLng(51.5073509,-.1277583)}],s=0;i=t[s];s++)n=i,new google.maps.Marker({position:n.position,icon:"../images/ico-marker.png",map:a})}form.steps({headerTag:"h3",bodyTag:"fieldset",transitionEffect:"slideLeft",labels:{cancel:"Назад",current:"",finish:"Оформить заявку",next:"Далее",previous:"Назад"},onStepChanging:function(e,r,a){return a<r||form.valid()},onFinishing:function(e,r){return form.valid()},onFinished:function(e,r){$(".submitted").addClass("active"),$(".actions > ul").remove()}}).validate({errorClass:"error",validClass:"valid",highlight:function(e){$(e).parent().addClass("error").removeClass("valid")},unhighlight:function(e){$(e).parent().removeClass("error").addClass("valid")},rules:{full_name:{required:!0},name_company:{required:!0},identification_code:{required:!0,number:!0},surname:{required:!0},email_person:{required:!0,email:!0},email_company:{required:!0,email:!0},phone:{required:!0,number:!0},message:{required:!1},ask_checkbox:{required:!0}}}),uploadImage(),$("#map").each(function(){mapInitialize($(this).attr("id"))});